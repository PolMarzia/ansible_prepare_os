---
- name: display cpu info
  become: true
  block:
    - name: Display CPU list
      command: "lscpu"
      register: cpu_info
      changed_when: false

    - name: Display Intel Hyper-Threading information
      command: "lscpu | grep 'Thread(s) per core'"
      register: ht_info
      changed_when: false
    - name: Display CPU Information
      debug:
        var: cpu_info.stdout
      when: cpu_info.stdout is defined
    - name: Display Hyper-Threading Information
      debug:
        var: ht_info.stdout
      when: ht_info.stdout is defined
